
{{#*inline "page_script_link"}}
<script src="/static/js/howler.min.js"></script>
<script src="/static/ts/accentuate.js"></script>
{{/inline}}

{{#*inline "main_section"}}
	<button id="menuButton" class="iconlike uiButton"><img src="/static/images/menu.png"></button>
	<section id="settings" style="display: none;">
		<ul id="settingsMenu">
			<li><form action="/logout" method="post"><button type="submit" class="linklike">Kirjaudu ulos</button></form></li>
			<li><a href="/change_password">Vaihda salasanaa</a></li>
			<li><a href="/thanks">Kiitokset</a></li>
		</ul>
	</section>

<h1>Sanakoroista</h1>
<section class="infoCard" id="infoCard1">
	<p class="wordyExplanation">Tämä ohjelma opettaa sinulle japanin ääntämystä; tarkemmin ottaen sanakorkoja.
	Mutta mikä oikeastaan on sanakorko?</p>
	<p class="tightBottom">Kuuntele nämä paikannimet:</p>
	<div class="horizontalFlexContainer">
		<div class="wordShowSection" style="text-align: center">
			<p class="leftWord tightBottom"><span class="accentuate kana">きょ・うと</span><span class="romaji accentuate">kyo・oto</span></p><!--
			--><button id="kyotoButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
		</div>
		<div class="wordShowSection" style="text-align: center">
			<p class="rightWord tightBottom"><span class="accentuate kana">とうきょう</span><span class="romaji accentuate">tookyoo</span></p><!--
			--><button id="tokyoButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
		</div>
	</div>
	<p class="wordyExplanation">Japanissa jokaisella sanalla on sille ominainen painotus, jota ilmaistaan äänenkorkeuden vaihteluilla:
	sana <span class="kana">きょうと</span></span><span class="romaji">kyooto</span> äännetään laskevalla äänenkorkeudella,
	kun taas <span class="kana">とうきょう</span><span class="romaji">tookyoo</span> tasaisella. Kuuletko eron? Tätä kullekin sanalle ominaista äänenkorkeuden
	kuviota kutsutaan sanakoroksi.</p>
</section>
<section class="infoCard" id="infoCard2">
	<p class="wordyExplanation tightBottom">Joskus harvoin käy niin, että kaksi sanaa lausutaan lähes täysin samoin, ja ne eroavat ainoastaan koroltaan. Kuuntele:</p>
	<div class="horizontalFlexContainer">
		<div class="wordShowSection" style="text-align: center">
			<p class="leftWord tightBottom"><span class="accentuate kana">せ・き</span><span class="accentuate romaji">se・ki</span></p><!--
			--><button id="leftSekiButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			<br>("istumapaikka")
		</div>
		<div class="wordShowSection" style="text-align: center">
			<p class="rightWord tightBottom"><span class="accentuate kana">せき</span><span class="accentuate romaji">seki</span></p><!--
			--><button id="rightSekiButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			<br>("yskä")
		</div>
	</div>
	<p class="wordyExplanation">Kuuletko? Sanat ovat lähes samat, mutta eroavat äänenkorkeuden vaihtelultaan.</p>
	<p class="wordyExplanation">Sekaannuksen vaara on siis olemassa, mutta onneksi tällaisia sanapareja ei ole paljoa. Yleisissä sanoissa niitä on ehkä
	muutamia satoja.</p>
</section>



<section class="infoCard" id="infoCard3">
	<p class="wordyExplanation">Sanakorko ei ole välttämätön asia ymmärtämisen kannalta; yleensä kontekstin ymmärtäminen on tärkeämpää. Lisäksi
	japanin eri murteissa korot vaihtelevat hieman. Tässä ohjelmassa kaikki esimerkit ovat Tokiossa puhuttua yleiskieltä.</p>

	<p class="wordyExplanation">Vaikka japanissa kaikilla sanoilla on niille ominaiset korot, keskitymme tässä nimenomaan
	äskeisen esimerkin kaltaisiin hämäävän samankuuloisiin pareihin, sillä ne toimivat erinomaisena harjoitusmateriaalina.</p>
</section>



<section class="infoCard" id="infoCard4">
	<p class="wordyExplanation">Miten sanakorot sitten toimivat? Perus&shy;sääntö on, että joko sana on "tasakorkoinen" tai sitten
	se sisältää yhden "korkoytimen".

	<p class="wordyExplanation tightBottom">Tasakorkoiset sanat alkavat pienellä äänen&shy;korkeuden nou&shy;sulla.
	Tämän jälkeen äänen&shy;korkeus pysyy tasaisena tai laskee hyvin loivasti.</p>

	<p>Esimerkki: <span class="accentuate kana">いこう</span><span class="accentuate romaji">ikoo</span>
<button id="heibanButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			<br>("aikomus")
	</p>

	<p class="wordyExplanation tightBottom">Jos sana ei ole tasakorkoinen, se sisältää ytimen. Ydin on tavu, jota ennen äänenkorkeus nousee, ja jonka kohdalla se äkillisesti laskee.</p>

	<p>Ydin tavulla "<span class="kana">こ</span><span class="romaji">ko</span>": <span class="accentuate kana">いこ・う</span><span class="accentuate romaji">iko・o</span>
<button id="kifukuButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			<br>("menkäämme")
	</p>

</section>



<section class="infoCard" id="infoCard5">
	<p class="wordyExplanation">Ydin voi olla myös sanan ensimmäisellä tavulla, jolloin äänenkorkeus laskee heti sanan alusta</p>

	<p>Ydin tavulla "<span class="kana">い</span><span class="romaji">i</span>": <span class="accentuate kana">い・こう</span><span class="accentuate romaji">i・koo</span>
<button id="atamadakaButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
		<br>("sen jälkeen")
	</p>

	<p class="wordyExplanation">Ydin voi olla myös sanan viimeisellä tavulla, jolloin sana kuulostaa erehdyttävästi tasa-aksentilliselta, sillä aksentin äkillistä laskua ei tapahdu.</p>
	<p>Ydin tavulla "<span class="kana">し</span><span class="romaji">shi</span>": <span class="accentuate kana">はし・</span><span class="accentuate romaji">hashi・</span>
<button id="odakaButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			<br>("silta")
</p>

</section>



<section class="infoCard" id="infoCard6">
	<p class="wordyExplanation tightBottom">Kuuntele seuraavat kaksi sanaa. Toinen on tasa-aksentillinen ja toisessa on ydin viimeisellä tavulla:</p>
	<div class="horizontalFlexContainer">
		<div class="wordShowSection" style="text-align: center">
			<p class="leftWord tightBottom"><span class="accentuate kana">はし</span><span class="accentuate romaji">hashi</span></p><!--
			--><button id="leftHashiButton2" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			<br>("reuna")
		</div>
		<div class="wordShowSection" style="text-align: center">
			<p class="rightWord tightBottom"><span class="accentuate kana">はし・</span><span class="accentuate romaji">hashi・</span></p><!--
			--><button id="rightHashiButton2" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			<br>("silta")
		</div>
	</div>
	<p class="wordyExplanation">Japanilainenkaan ei kuule niissä eroa!</p>
	<p class="wordyExplanation">Ero kuitenkin on olemassa; se kuuluu heti sanan jälkeen tulevissa sijapäätteissä.
	Vertaa sanoja <span class="kana">に</span><span class="romaji">ni</span>-sijapäätteen kanssa:</p>

	<p>Ydin tavulla "<span class="kana">し</span><span class="romaji">shi</span>": <span class="accentuate kana">はし・に</span><span class="accentuate romaji">hashi・ni</span>
<button id="leftHashiniButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
			</p>

	<p>Tasakorko: <span class="accentuate kana">はしに</span><span class="accentuate romaji">hashini</span>
<button id="rightHashiniButton" class="wordShowButton"><!--
			--><img src="/static/images/speaker_teal.png"  class="soundicon" class="speakerIconTeal"><!--
			--><img src="/static/images/speaker_pink.png" class="soundicon" class="speakerIconPink" style="display:none;"></button>
	</p>
</section>


<section class="infoCard" id="infoCard7">
	<p class="wordyExplanation">Siinä olikin kaikki tähän hätään. Sana-aksenteista voisi luennoida loputtomiin,
	mutta tärkeämpää on päästä harjoittelemaan niitä käytännössä. Tämä oli vain pieni esittely, missä käytiin läpi
	olennaisimmat seikat.</p>
	<p>Oppimisen iloa!</p>
</section>
<button id="prevInfoCard">&lt; Edellinen</button>
<span id="cardPerCard"> / </span>
<button id="nextInfoCard">Seuraava &gt;</button>

<form action="/ok" method="post" style="display: inline">
<button id="infoOver" style="display: none" >Eteenpäin</button><input type="hidden" value="{{ event_name }}" name="event_ok">
</form>

{{/inline}}

{{#*inline "page_script_inline"}}

let maxCards = 7;

function getCurrentCard() {
	let loc = parseInt(location.hash[1]) || 1;
	loc = Math.max(Math.min(loc, maxCards), 1);
	return loc;
}

function updateInfoCard() {
	let currentInfoCard = getCurrentCard();

	$(".infoCard").hide();
	$("#infoCard"+currentInfoCard).show();
	$("#cardPerCard").text(currentInfoCard + "/"+maxCards);


	$("#prevInfoCard").prop('disabled', false);
	$("#nextInfoCard").show();
	$("#infoOver").hide();

	if (currentInfoCard == 1) {
		$("#prevInfoCard").prop('disabled', true);
	}
	if (currentInfoCard == maxCards) {
		$("#nextInfoCard").hide();
		$("#infoOver").show();
	}
}

updateInfoCard();

$("#prevInfoCard").click(function() {
	location.hash = "#"+(getCurrentCard() - 1);
	updateInfoCard();
});
$("#nextInfoCard").click(function() {
	location.hash = "#"+(getCurrentCard() + 1);
	updateInfoCard();
});

function setWordShowButton(audio_src, button) {

	var audio = new Howl({ src: [audio_src]});

	button.off('click').on('click', function() {
		console.log("Clicked");
		button.children(".speakerIconTeal").hide();
		button.children(".speakerIconPink").show();
		audio.play();
	});

	audio.on('end', function() {
		button.children(".speakerIconTeal").show();
		button.children(".speakerIconPink").hide();
	});

}

setWordShowButton("/static/content_audio/kyoto.mp3", $("#kyotoButton"));
setWordShowButton("/static/content_audio/tokyo.mp3", $("#tokyoButton"));

setWordShowButton("/static/content_audio/seki1.mp3", $("#leftSekiButton"));
setWordShowButton("/static/content_audio/seki2.mp3", $("#rightSekiButton"));

setWordShowButton("/static/content_audio/ikou3.mp3", $("#heibanButton"));
setWordShowButton("/static/content_audio/ikou2.mp3", $("#kifukuButton"));

setWordShowButton("/static/content_audio/ikou1.mp3", $("#atamadakaButton"));
setWordShowButton("/static/content_audio/hashi2.mp3", $("#odakaButton"));

setWordShowButton("/static/content_audio/hashi3.mp3", $("#leftHashiButton2"));
setWordShowButton("/static/content_audio/hashi2.mp3", $("#rightHashiButton2"));

setWordShowButton("/static/content_audio/hashini1.mp3", $("#leftHashiniButton"));
setWordShowButton("/static/content_audio/hashini2.mp3", $("#rightHashiniButton"));

{{/inline}}

{{~> base.html ~}}
